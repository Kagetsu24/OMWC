extends ../layout.pug
include ../mixins/buttons.pug

block content
    .container.text-center
        .row
            .col-sm
                if teams.length
                    h4 Confirm Teams
                    table.table.table-hover
                        thead
                            tr
                                th Team
                                th Chosen
                                th Not chosen
                                th
                        tbody
                            each team in teams
                                tr
                                    td= team.country.name
                                    td
                                        if team.users
                                            each user in team.users
                                                = user.username + ' '
                                    td
                                        - let notChosen = (team.users ? applications.filter(a => (!team.users || team.users.find(u => u.id === a.user.id) === undefined)) : applications)
                                        each application in notChosen
                                            = application.user.username + ' '
                                    td
                                        if team.isCompeting
                                            form(action="/admin/teamsChoice/deny" method="post")
                                                input(type="hidden", name="teamId" value=team.id)
                                                +submit-button('Deny team')

                                        else
                                            form(action="/admin/teamsChoice/confirm" method="post")
                                                input(type="hidden", name="teamId" value=team.id)
                                                +submit-button('Confirm team')

                else
                    p No teams yet
